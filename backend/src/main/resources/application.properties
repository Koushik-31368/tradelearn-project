# ===================================================================
# TradeLearn Backend â€” Core Configuration
# ===================================================================
# Profile-specific overrides: application-{profile}.properties
# Active profile set by SPRING_PROFILES_ACTIVE env var (default: local)
# ===================================================================

spring.profiles.active=${SPRING_PROFILES_ACTIVE:local}

# ===== APPLICATION =====
spring.application.name=tradelearn-backend
server.port=${PORT:8080}

# ===== THREAD POOL SIZING (10K concurrent games) =====
server.tomcat.threads.max=${TOMCAT_MAX_THREADS:200}
server.tomcat.threads.min-spare=${TOMCAT_MIN_THREADS:20}
server.tomcat.max-connections=${TOMCAT_MAX_CONNECTIONS:10000}
server.tomcat.accept-count=${TOMCAT_ACCEPT_COUNT:200}

# ===== GAME SCHEDULER =====
tradelearn.scheduler.pool-size=${SCHEDULER_POOL_SIZE:64}
tradelearn.scheduler.await-termination-seconds=10

# ===== RATE LIMITING =====
tradelearn.ratelimit.enabled=${RATE_LIMIT_ENABLED:true}
tradelearn.ratelimit.general.rpm=${RATE_LIMIT_GENERAL:100}
tradelearn.ratelimit.trades.rpm=${RATE_LIMIT_TRADES:60}
tradelearn.ratelimit.create.rpm=${RATE_LIMIT_CREATE:10}

# ===== SECURITY HEADERS =====
tradelearn.security.hsts.enabled=${HSTS_ENABLED:true}
tradelearn.security.hsts.max-age=31536000

# ===== ACTUATOR / MONITORING =====
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.tags.application=tradelearn

# ===== JACKSON =====
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.default-property-inclusion=non_null
